# Правила разработки FairTask Engine

## Архитектурные принципы

### Feature-Sliced Design (FSD)
- **Строгое соблюдение слоев**: app → pages → widgets → features → entities → shared
- **Публичные API**: каждый слой экспортирует только необходимые части через index.ts
- **Изоляция**: слои не должны напрямую импортировать друг друга (кроме shared)
- **Именование**: использовать суффиксы для типов файлов (.ui, .model, .api, .lib)

### Структура папок
```
src/
├── app/           # Инициализация приложения
├── pages/         # Страницы приложения
├── widgets/       # Крупные UI блоки
├── features/      # Бизнес-функциональность
├── entities/      # Бизнес-сущности
└── shared/        # Переиспользуемый код
```

## Правила кодирования

### TypeScript
- **Строгая типизация**: все переменные, функции, компоненты должны иметь типы
- **Интерфейсы**: использовать interface для описания объектов
- **Типы**: использовать type для union types и сложных типов
- **Generic**: использовать generic для переиспользуемых компонентов
- **Строгий режим**: включен strict mode в tsconfig.json

### React
- **Функциональные компоненты**: использовать только функциональные компоненты с хуками
- **Мемоизация**: использовать React.memo, useMemo, useCallback где необходимо
- **Хуки**: создавать кастомные хуки для переиспользуемой логики
- **Props**: типизировать все props через interface

### Styled Components
- **Именование**: использовать PascalCase для styled компонентов
- **Темы**: использовать ThemeProvider для глобальных стилей
- **Переменные**: выносить цвета, размеры в theme объект
- **Адаптивность**: использовать медиа-запросы для responsive дизайна

## Правила именования

### Файлы и папки
- **Компоненты**: PascalCase (UserCard.tsx)
- **Хуки**: camelCase с префиксом use (useUserData.ts)
- **Утилиты**: camelCase (formatDate.ts)
- **Константы**: UPPER_SNAKE_CASE (API_ENDPOINTS.ts)
- **Типы**: PascalCase (User, TaskStatus)

### Переменные и функции
- **Переменные**: camelCase (userName, taskList)
- **Функции**: camelCase (getUserData, handleSubmit)
- **Константы**: UPPER_SNAKE_CASE (MAX_TASKS_PER_HOUR)
- **Компоненты**: PascalCase (UserCard, TaskList)

## Правила работы с данными

### API
- **Типизация**: все API ответы должны быть типизированы
- **Обработка ошибок**: обязательная обработка всех возможных ошибок
- **Retry**: реализация retry механизмов для критических запросов
- **Кеширование**: использование кеша для часто запрашиваемых данных

### Состояние
- **React Query**: использовать для серверного состояния
- **Zustand/Redux**: для клиентского состояния (если необходимо)
- **Локальное состояние**: useState для простых случаев
- **Глобальное состояние**: только когда действительно необходимо

## Правила производительности

### Оптимизация
- **Lazy loading**: использовать для больших компонентов
- **Code splitting**: разделение кода по роутам
- **Мемоизация**: использовать для дорогих вычислений
- **Виртуализация**: для больших списков

### Мониторинг
- **Профилирование**: регулярно проверять производительность
- **Bundle analyzer**: анализировать размер бандла
- **Lighthouse**: проверять Core Web Vitals

## Правила тестирования

### Unit тесты
- **Покрытие**: минимум 80% для критических компонентов
- **Jest + Testing Library**: основной стек для тестирования
- **Моки**: использовать для внешних зависимостей
- **Снапшоты**: для UI компонентов

### Интеграционные тесты
- **API**: тестировать интеграцию с бэкендом
- **Пользовательские сценарии**: тестировать полные флоу
- **Cypress**: для E2E тестирования

## Правила безопасности

### Данные
- **Валидация**: валидировать все входящие данные
- **Санитизация**: очищать пользовательский ввод
- **Токены**: безопасное хранение токенов аутентификации
- **HTTPS**: обязательное использование в production

### Код
- **Зависимости**: регулярно обновлять и проверять на уязвимости
- **Секреты**: не хранить секреты в коде
- **Логирование**: не логировать чувствительные данные

## Правила документации

### Комментарии
- **JSDoc**: для всех публичных функций и компонентов
- **README**: для каждого модуля/фичи
- **Примеры**: предоставлять примеры использования

### Код
- **Самодокументируемый**: код должен быть понятен без комментариев
- **Именование**: использовать понятные имена переменных и функций
- **Структура**: логичная структура файлов и папок

## Правила Git

### Коммиты
- **Conventional Commits**: использовать стандартный формат
- **Частые коммиты**: делать небольшие, логичные коммиты
- **Сообщения**: понятные сообщения на английском языке

### Ветки
- **Feature branches**: для каждой новой фичи
- **Naming**: feature/epic-name, bugfix/issue-name
- **Merge requests**: обязательные для всех изменений

## Правила ревью кода

### Проверки
- **Типизация**: все ли типы корректны
- **Архитектура**: соблюдение FSD принципов
- **Производительность**: нет ли узких мест
- **Безопасность**: проверка на уязвимости
- **Тесты**: покрытие тестами новых изменений

### Критерии
- **Читаемость**: код должен быть понятен
- **Переиспользование**: нет ли дублирования
- **Производительность**: оптимальность решений
- **Соответствие**: стандартам проекта

## Правила работы в команде

### Коммуникация
- **Ежедневные стендапы**: синхронизация прогресса
- **Документирование**: все решения должны быть задокументированы
- **Код-ревью**: обязательное для всех изменений

### Ответственность
- **Владелец**: каждый эпик имеет ответственного
- **Дедлайны**: соблюдение временных рамок
- **Качество**: не жертвовать качеством ради скорости

---

**Важно**: Эти правила должны соблюдаться всеми участниками команды. При необходимости правила могут быть дополнены или изменены по согласованию команды.
